<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lá»i Má»i GiÃ¡ng Sinh</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Patrick+Hand&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css"> 
    <link rel="stylesheet" href="css/welcome.css">
    <style>
        /* ThÃªm CSS cho hiá»‡u á»©ng rung láº¯c (náº¿u file css chÆ°a cÃ³) */
        .shake { animation: shake 0.5s; }
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
    </style>
</head>
<body>
    <div id="snow-container"></div>

    <div class="welcome-container">
        <div class="wreath">ğŸ„</div>
        
        <h1>ChÃ o má»«ng Ä‘áº¿n vá»›i<br>Bá»™ SÆ°u Táº­p GiÃ¡ng Sinh</h1>
        
        <p class="subtitle">Xin cho biáº¿t quÃ½ danh cá»§a báº¡n?</p>
        
        <div class="input-group">
            <input type="text" id="guestName" placeholder="Nháº­p tÃªn báº¡n vÃ o Ä‘Ã¢y..." autocomplete="off">
            <button onclick="enterSite()">GÃµ Cá»­a & VÃ o ğŸ</button>
        </div>

        <p id="error-msg" style="color: #ff6b6b; display: none; margin-top: 10px;">Vui lÃ²ng nháº­p tÃªn Ä‘á»ƒ Ã´ng giÃ  Noel biáº¿t máº·t nhÃ©!</p>
    </div>

    <script src="js/script.js"></script>
    <script>
        // HÃ m xá»­ lÃ½ khi báº¥m nÃºt VÃ o
        function enterSite() {
            // --- Æ¯U TIÃŠN Sá» 1: Báº¬T NHáº C NGAY Láº¬P Tá»¨C ---
            // Gá»i cÃ ng sá»›m cÃ ng tá»‘t Ä‘á»ƒ trÃ¬nh duyá»‡t khÃ´ng cháº·n
            if (window.parent && window.parent.playAudioExternally) {
                window.parent.playAudioExternally();
            }

            const nameInput = document.getElementById('guestName');
            const name = nameInput.value.trim();

            if (name) {
                // DÃ¹ng sessionStorage (Táº¯t trÃ¬nh duyá»‡t lÃ  máº¥t tÃªn -> Fix lá»—i lÆ°u cÅ©)
                sessionStorage.setItem('guestName', name);
                
                // Hiá»‡u á»©ng má» dáº§n
                document.body.style.opacity = 0;
                document.body.style.transition = "opacity 1s ease";
                
                setTimeout(() => {
                    // Chuyá»ƒn hÆ°á»›ng TRONG IFRAME (KhÃ´ng dÃ¹ng .top)
                    window.location.href = 'card.html';
                }, 1000);
            } else {
                // Rung láº¯c Ã´ input náº¿u quÃªn nháº­p tÃªn
                const inputGroup = document.querySelector('.input-group');
                inputGroup.classList.add('shake');
                document.getElementById('error-msg').style.display = 'block';
                
                setTimeout(() => {
                    inputGroup.classList.remove('shake');
                }, 500);
            }
        }

        // Cho phÃ©p áº¥n Enter Ä‘á»ƒ vÃ o
        document.getElementById("guestName").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                enterSite();
            }
        });
    </script>
</body>
</html>