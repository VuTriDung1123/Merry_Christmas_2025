<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hệ 8-Bit Pixel Game</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* ===== CẤU HÌNH CHUNG ===== */
        body { 
            background-color: #202028;
            font-family: 'Press Start 2P', cursive, 'Courier New', monospace;
            overflow: hidden;
            user-select: none;
            margin: 0;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

        .pixel-container {
            display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh;
            position: relative;
        }

        /* ===== LƯỚI VẼ CÂY THÔNG (ĐÃ CHỈNH TO HƠN) ===== */
        .grid-pixel {
            display: grid;
            /* Tăng lên 25 cột, mỗi cột 14px (nhỏ hơn xíu để chứa cây to) */
            grid-template-columns: repeat(25, 14px); 
            grid-auto-rows: 14px;
            gap: 1px;
            margin-bottom: 20px;
            position: relative; z-index: 10;
        }

        .pixel { width: 100%; height: 100%; }
        
        /* Bảng màu */
        .tr { background: transparent; }
        .gr { background: #00aa00; box-shadow: inset -2px -2px 0 rgba(0,0,0,0.3); } /* Lá */
        .br { background: #aa5500; } /* Thân */
        .ye { background: #ffff55; animation: starFlash 0.5s infinite alternate; } /* Sao */
        .re { background: #ff5555; animation: lightFlash 1s infinite; } /* Đèn đỏ */
        .bl { background: #5555ff; animation: lightFlash 1.5s infinite; } /* Đèn xanh */

        @keyframes starFlash { from { opacity: 0.8; } to { opacity: 1; transform: scale(1.1); } }
        @keyframes lightFlash { 0%, 100% { filter: brightness(1); } 50% { filter: brightness(1.5); } }

        /* ===== QUÁI VẬT 8-BIT ===== */
        .virus {
            position: absolute;
            width: 4px; height: 4px;
            background: transparent;
            z-index: 5;
        }

        .virus-purple {
            color: #bd93f9;
            box-shadow: 
                20px 0, 32px 0,
                16px 4px, 20px 4px, 24px 4px, 28px 4px, 32px 4px, 36px 4px,
                12px 8px, 16px 8px, 24px 8px, 28px 8px, 36px 8px, 40px 8px,
                12px 12px, 16px 12px, 20px 12px, 24px 12px, 28px 12px, 32px 12px, 36px 12px, 40px 12px,
                12px 16px, 40px 16px,
                16px 20px, 36px 20px,
                20px 24px, 24px 24px, 28px 24px, 32px 24px;
            bottom: 10%; left: -50px;
            animation: moveRight 10s linear infinite, bounce 0.5s step-end infinite;
        }

        .virus-green {
            color: #50fa7b;
            box-shadow: 
                16px 0, 36px 0,
                4px 4px, 16px 4px, 36px 4px, 48px 4px,
                4px 8px, 16px 8px, 20px 8px, 24px 8px, 28px 8px, 32px 8px, 36px 8px, 48px 8px,
                4px 12px, 8px 12px, 12px 12px, 16px 12px, 20px 12px, 32px 12px, 36px 12px, 40px 12px, 44px 12px, 48px 12px,
                16px 16px, 20px 16px, 24px 16px, 28px 16px, 32px 16px, 36px 16px,
                12px 20px, 40px 20px,
                8px 24px, 44px 24px;
            bottom: 25%; right: -60px;
            animation: moveLeft 12s linear infinite, bounce 0.6s step-end infinite;
        }

        @keyframes moveRight { from { left: -100px; } to { left: 110%; } }
        @keyframes moveLeft { from { right: -100px; } to { right: 110%; } }
        @keyframes bounce { 0% { transform: translateY(0); } 50% { transform: translateY(-5px); } }

        /* ===== TIÊU ĐỀ ===== */
        h1 { 
            font-family: 'Press Start 2P', cursive; color: #ffaa00; 
            margin-top: 10px; text-shadow: 4px 4px #aa0000; font-size: 1.5rem;
            text-transform: uppercase; z-index: 20;
        }

        .back-btn {
            position: absolute; top: 20px; left: 20px; 
            color: white; font-family: 'Press Start 2P'; text-decoration: none; font-size: 10px;
            border: 2px solid #fff; padding: 10px; background: #000; z-index: 100;
        }
        .back-btn:hover { background: #fff; color: #000; }

        /* Responsive Mobile: Thu nhỏ cây nếu màn hình bé */
        @media (max-width: 600px) {
            .grid-pixel { transform: scale(0.7); margin-bottom: 0; }
            .virus { transform: scale(0.5); }
            h1 { font-size: 1rem; margin-top: 0; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn">&lt; MENU</a>

    <div class="pixel-container">
        
        <div class="grid-pixel" id="pixelTree"></div>
        
        <h1>8-BIT XMAS</h1>

        <div class="virus virus-purple"></div>
        <div class="virus virus-green" style="bottom: 50%; animation-duration: 15s;"></div> 
        <div class="virus virus-purple" style="bottom: 70%; animation-duration: 20s; animation-delay: 2s; color: #ff5555;"></div>

    </div>

    <div id="snow-container"></div>
    <script src="js/script.js"></script>

    <script>
        // BẢN ĐỒ PIXEL MỚI (RỘNG 25 CỘT)
        // g: green, y: yellow, r: red, b: blue, w: wood, 0: blank
        const pixelMap = [
            "000000000000y000000000000", // Đỉnh sao
            "00000000000ggg00000000000",
            "0000000000ggggg0000000000",
            "000000000gggrggg000000000",
            "00000000ggggggggg00000000", // Hết tầng 1
            "0000000000ggggg0000000000", // Thắt eo
            "000000000ggggggg000000000",
            "00000000ggbggggrgg0000000",
            "0000000ggggggggggg0000000",
            "000000gggggrggbgggg000000",
            "00000ggggggggggggggg00000", // Hết tầng 2
            "00000000ggggggggg00000000", // Thắt eo
            "0000000gggggrgggggg000000",
            "000000gggggggggbgggg00000",
            "00000gggggbgggggggggg0000",
            "0000gggggggggrgggggggg000",
            "000gggggrggggggggbgggg000",
            "00ggggggggggggggggggggg00", // Hết tầng 3
            "0000000ggggggggggg0000000", // Thắt eo
            "000000gggggbgrggggg000000",
            "00000ggggggggggggggg00000",
            "0000gggggrgggggggbiggg000",
            "000gggggggggbgggggggggg00",
            "00gggggbgggggggggrgggggg0",
            "0ggggggggggggggggggggggg0",
            "gggggggggrggggggggbgggggg", // Đáy tán lá
            "0000000000wwwww0000000000", // Gốc cây
            "0000000000wwwww0000000000",
            "0000000000wwwww0000000000",
            "0000000000wwwww0000000000"
        ];

        const grid = document.getElementById('pixelTree');
        pixelMap.forEach(row => {
            for (let char of row) {
                const div = document.createElement('div');
                div.classList.add('pixel');
                if (char === '0') div.classList.add('tr');
                else if (char === 'g') div.classList.add('gr');
                else if (char === 'y') div.classList.add('ye');
                else if (char === 'r') div.classList.add('re');
                else if (char === 'b') div.classList.add('bl');
                else if (char === 'w') div.classList.add('br');
                grid.appendChild(div);
            }
        });
    </script>
</body>
</html>